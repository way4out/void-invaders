<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Void Invaders: Galactic Grind</title>
    <style>
        body { background: #000; color: #0f0; font-family: 'Courier New', monospace; text-align: center; margin: 0; padding: 0; overflow: hidden; touch-action: none; }
        h1 { text-shadow: 0 0 10px #0f0; animation: glow 2s infinite; }
        @keyframes glow { 0%,100%{text-shadow:0 0 5px #0f0;} 50%{text-shadow:0 0 20px #0f0;} }
        canvas { border: 2px solid #0f0; background: #111; display: block; margin: 0 auto; width: 100%; height: calc(100vh - 30px); touch-action: none; }
        #controls { display: flex; justify-content: center; flex-wrap: wrap; gap: 5px; margin: 10px; position: absolute; z-index: 10; width: 100%; }
        button { background: #000; color: #0f0; border: 1px solid #0f0; padding: 5px 10px; cursor: pointer; font-family: inherit; }
        button:hover, button:disabled { background: #0f0; color: #000; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        #status { font-size: 12px; position: absolute; top: 10px; left: 10px; z-index: 10; }
        #ticker { position: absolute; top: 0; left: 0; width: 100%; background: rgba(0,255,0,0.1); font-size: 10px; white-space: nowrap; animation: scroll 20s linear infinite; z-index: 10; }
        @keyframes scroll { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
        .shard-display { display: inline-block; margin: 2px; padding: 2px 5px; background: #111; border: 1px solid #0f0; }
        #viewsTicker { position: absolute; bottom: 0; left: 0; width: 100%; background: rgba(0,0,0,0.8); color: #0f0; font-size: 10px; text-align: center; padding: 5px; z-index: 10; }
        #nftEquip { position: absolute; right: 10px; top: 10px; z-index: 10; }
    </style>
</head>
<body>
    <div id="ticker">$WAY4OUT: $0.0012 â†‘2% | $COIN4: $0.0045 â†‘15% | $TR3B: $0.0008 â†“1% | $A1IEN: $0.000001 ðŸ‘½ | Grind to Mine!</div>
    <h1>Void Invaders: Galactic Grind</h1>
    <p>Defend the void, mine shards, redeem for $WAY4OUT/$COIN4/$TR3B/$A1IEN on Base!</p>
    <button id="connectWallet">Connect MetaMask (Base)</button>
    <p id="walletStatus">Wallet: Disconnected</p>
    <div id="nftEquip">
        <button id="mintNFT">Mint Bunker Skin (Zora)</button>
        <button id="equipNFT">Equip NFT</button>
    </div>
    <div id="controls">
        <button id="claimAirdrop">Claim Airdrop</button>
        <button id="upgradeCoin4">Quad Boost ($COIN4 x1)</button>
        <button id="escapeWay4">Warp Escape ($WAY4OUT x1)</button>
        <button id="scanTr3b">Oracle Scan ($TR3B x1)</button>
        <button id="swarmA1ien">Alien Swarm ($A1IEN x1)</button>
        <button id="redeemWay4">Redeem $WAY4OUT</button>
        <button id="redeemCoin4">Redeem $COIN4</button>
        <button id="redeemTr3b">Redeem $TR3B</button>
        <button id="redeemA1ien">Redeem $A1IEN</button>
        <button id="fullScreen">Full Screen</button>
        <button id="toggleMusic">Music On/Off</button>
    </div>
    <canvas id="gameCanvas"></canvas>
    <div id="status">
        <span class="shard-display">Score: <span id="score">0</span></span>
        <span class="shard-display">$WAY4OUT: <span id="way4Shards">0</span></span>
        <span class="shard-display">$COIN4: <span id="coin4Shards">0</span></span>
        <span class="shard-display">$TR3B: <span id="tr3bShards">0</span></span>
        <span class="shard-display">$A1IEN: <span id="a1ienShards">0</span></span>
        <span class="shard-display">Wave: <span id="wave">1</span></span>
    </div>
    <div id="viewsTicker">Total Views: <span id="viewsCount">0</span></div>
    <audio id="bgMusic" loop>
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLI9ErK+9gA=" type="audio/wav">
    </audio>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script>
        // Full Game Script with $A1IEN & Zora NFT Integration
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const elements = {
            score: document.getElementById('score'), way4Shards: document.getElementById('way4Shards'),
            coin4Shards: document.getElementById('coin4Shards'), tr3bShards: document.getElementById('tr3bShards'),
            a1ienShards: document.getElementById('a1ienShards'), wave: document.getElementById('wave'),
            walletStatus: document.getElementById('walletStatus'), viewsCount: document.getElementById('viewsCount')
        };
        const buttons = {
            connect: document.getElementById('connectWallet'), upgradeCoin4: document.getElementById('upgradeCoin4'),
            escapeWay4: document.getElementById('escapeWay4'), scanTr3b: document.getElementById('scanTr3b'),
            swarmA1ien: document.getElementById('swarmA1ien'), redeemWay4: document.getElementById('redeemWay4'),
            redeemCoin4: document.getElementById('redeemCoin4'), redeemTr3b: document.getElementById('redeemTr3b'),
            redeemA1ien: document.getElementById('redeemA1ien'), claimAirdrop: document.getElementById('claimAirdrop'),
            mintNFT: document.getElementById('mintNFT'), equipNFT: document.getElementById('equipNFT'),
            fullScreen: document.getElementById('fullScreen'), toggleMusic: document.getElementById('toggleMusic')
        };

        let web3, account, contracts = {};
        const CHAIN_ID = 8453;
        const REWARD_ADDRESS = '0xCeA57eEdA6eF19ce51caBE00e4CF425a31802D74';
        const ZORA_CONTRACT = '0xYourZora721AddressHere'; // Deploy your bunker NFT collection on Zora/Remix, update here
        const ZORA_ABI = [{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeMint","outputs":[],"stateMutability":"payable","type":"function"}]; // Zora ERC721 mint with royalty
        const A1IEN_ADDRESS = '0xf097454f9874ce870d0d4cd8d419c3de4e63197e';
        const ERC20_ABI = [{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"balance","type":"uint256"}],"stateMutability":"view","type":"function"},
{"inputs":[{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},
{"inputs":[{"internalType":"uint256","name":"_value","type":"uint256"}],"name":"burn","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},
{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"}];

        const CONTRACTS = {
            WAY4OUT: { address: '0xd07379a755a8f11b57610154861d694b2a0f615a', abi: ERC20_ABI, decimals: 18 },
            COIN4: { address: '0x4deeba0fca2f9a8b307b891241eac57b6bf713ec', abi: ERC20_ABI, decimals: 18 },
            TR3B: { address: '0x98a8165a44782ab43c378ed9f501d55ec51b2880', abi: ERC20_ABI, decimals: 18 },
            A1IEN: { address: A1IEN_ADDRESS, abi: ERC20_ABI, decimals: 18 }
        };

        let gameState = JSON.parse(localStorage.getItem('voidInvaders')) || {
            score: 0, way4Shards: 0, coin4Shards: 0, tr3bShards: 0, a1ienShards: 0, wave: 1, highScore: 0,
            player: { x: 375, y: 550, width: 50, height: 20, speed: 5, shields: 1, powerUp: null, nftSkin: null },
            upgrades: { laserSpeed: 1, escapeUsed: false }, airdropClaimed: false
        };
        let invaders = [], bullets = [], invaderBullets = [], barriers = [], particles = [], powerUps = [], ufoAllies = [];
        let keys = {}, touchX = 0, touchY = 0, touchActive = false, music = document.getElementById('bgMusic'), musicPlaying = false;
        let audioCtx, nextDrop = 'WAY4OUT';

        // Views Ticker
        let views = parseInt(localStorage.getItem('voidViews') || '0') + 1;
        localStorage.setItem('voidViews', views.toString());
        elements.viewsCount.textContent = views;

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight - 30;
            gameState.player.x = canvas.width / 2 - 25;
            gameState.player.y = canvas.height - 50;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function init() {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            initInvaders();
            initBarriers();
            updateDisplay();
            requestAnimationFrame(gameLoop);
            loadContracts();
            if (gameState.wave % 10 === 0) dailyEvent();
        }

        async function loadContracts() {
            if (!web3) return;
            Object.keys(CONTRACTS).forEach(key => {
                contracts[key] = new web3.eth.Contract(CONTRACTS[key].abi, CONTRACTS[key].address);
            });
            // Zora NFT Contract
            contracts.ZORA = new web3.eth.Contract(ZORA_ABI, ZORA_CONTRACT);
        }

        // ... (Rest of game logic same as previous: gameLoop, updatePlayer, initInvaders, etc. â€“ to save space, assume it's the same block from last script, with A1IEN drops in checkCollisions for boss: if (inv.isBoss && inv.health <= 0) gameState.a1ienShards += 5;)

        // Zora NFT Mint (10% royalty to your addr â€“ set in contract deploy)
        buttons.mintNFT.onclick = async () => {
            if (!account) return alert('Connect wallet!');
            try {
                const tokenId = Date.now();
                const price = web3.utils.toWei('0.001', 'ether'); // Mint fee
                await contracts.ZORA.methods.safeMint(account, tokenId).send({ from: account, value: price });
                alert('Bunker Skin NFT minted on Zora! 10% royalties to 0xCeA57... on resales.');
                gameState.player.nftSkin = tokenId; // Equip auto
                updateDisplay(); // Refresh skin visual in drawAll if you add ctx.drawImage later
            } catch (err) { alert('Mint failed: ' + err.message); }
        };

        buttons.equipNFT.onclick = async () => {
            if (!account) return alert('Connect wallet!');
            try {
                const balance = await contracts.ZORA.methods.balanceOf(account).call();
                if (balance > 0) {
                    gameState.player.nftSkin = balance; // Simple equip
                    alert('NFT equipped! Visual upgrade loaded.');
                } else alert('No NFTs owned!');
            } catch (err) { alert('Equip failed: ' + err.message); }
        };

        // A1IEN Swarm (Fun Inclusive: Noobs summon UFOs for auto-kills)
        buttons.swarmA1ien.onclick = () => {
            if (gameState.a1ienShards >= 1) {
                gameState.a1ienShards--;
                for (let i = 0; i < 5; i++) {
                    ufoAllies.push({ x: Math.random() * canvas.width, y: 0, speed: 2 });
                }
                setTimeout(() => ufoAllies = [], 15000);
                alert('Alien Swarm activated! UFO allies shooting for 15s ðŸ‘½');
            } else alert('Need $A1IEN shard!');
        };

        // Rest of functions (shoot, drawAll with NFT skin check: if (gameState.player.nftSkin) ctx.fillStyle = '#f0f'; // Purple glow for NFT), connectWallet, redeemToken (add A1IEN), etc. â€“ same as before, with oracle including A1IEN.

        init();
    </script>
</body>
</html>
